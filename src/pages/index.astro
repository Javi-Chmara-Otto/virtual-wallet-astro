---
import Layout from "../layouts/layout.astro";
// import Wallet from "../components/wallet.astro";
---

<Layout title="Dashboard - Mi Billetera Virtual" currentPath="/">
	<div class="space-y-6">
		<!-- Encabezado del Dashboard -->
		<div class="flex justify-between items-center">
			<h1 class="text-2xl font-bold text-gray-800">Dashboard</h1>
			<div class="flex gap-2">
				<button
					class="px-4 py-2 bg-white text-gray-600 rounded-lg hover:bg-gray-50 border transition-colors"
				>
					<span>Últimos 30 días</span>
				</button>
				<button
					class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors"
				>
					+ Nueva Transacción
				</button>
			</div>
		</div>

		<!-- Agregar el componente Wallet aquí -->
		<!-- <div class="flex justify-center">
			<Wallet />
		</div> -->

		<!-- Tarjetas de Resumen -->
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
			<!-- Saldo Total -->
			<div
				class="bg-white p-6 rounded-xl shadow-sm border border-gray-100"
			>
				<div class="flex justify-between items-start">
					<div>
						<p class="text-sm text-gray-500">Saldo Total</p>
						<h2 class="text-2xl font-bold text-gray-800">
							$5,240.50
						</h2>
					</div>
					<span
						class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full"
						>+3.5%</span
					>
				</div>
				<div class="mt-4 flex items-center text-sm text-gray-500">
					<svg
						class="w-4 h-4 text-green-500 mr-1"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
					</svg>
					<span>12% más que el mes pasado</span>
				</div>
			</div>

			<!-- Ingresos -->
			<div
				class="bg-white p-6 rounded-xl shadow-sm border border-gray-100"
			>
				<div class="flex justify-between items-start">
					<div>
						<p class="text-sm text-gray-500">Ingresos</p>
						<h2 class="text-2xl font-bold text-gray-800">
							$3,850.00
						</h2>
					</div>
					<span
						class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full"
						>+2.8%</span
					>
				</div>
				<div class="mt-4 flex items-center text-sm text-gray-500">
					<svg
						class="w-4 h-4 text-green-500 mr-1"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
					</svg>
					<span>8% más que el mes pasado</span>
				</div>
			</div>

			<!-- Gastos -->
			<div
				class="bg-white p-6 rounded-xl shadow-sm border border-gray-100"
			>
				<div class="flex justify-between items-start">
					<div>
						<p class="text-sm text-gray-500">Gastos</p>
						<h2 class="text-2xl font-bold text-gray-800">
							$2,150.00
						</h2>
					</div>
					<span
						class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full"
						>+5.2%</span
					>
				</div>
				<div class="mt-4 flex items-center text-sm text-gray-500">
					<svg
						class="w-4 h-4 text-red-500 mr-1"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M13 17h8m0 0v-8m0 8l-8-8-4 4-6-6"></path>
					</svg>
					<span>15% más que el mes pasado</span>
				</div>
			</div>

			<!-- Ahorros -->
			<div
				class="bg-white p-6 rounded-xl shadow-sm border border-gray-100"
			>
				<div class="flex justify-between items-start">
					<div>
						<p class="text-sm text-gray-500">Ahorros</p>
						<h2 class="text-2xl font-bold text-gray-800">
							$1,750.00
						</h2>
					</div>
					<span
						class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full"
						>90%</span
					>
				</div>
				<div class="mt-4 flex items-center text-sm text-gray-500">
					<svg
						class="w-4 h-4 text-blue-500 mr-1"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
					</svg>
					<span>Meta mensual: $2,000</span>
				</div>
			</div>
		</div>

		<!-- Gráficos y Tablas -->
		<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
			<!-- Gráfico de Gastos -->
			<div
				class="bg-white p-6 rounded-xl shadow-sm border border-gray-100"
			>
				<h3 class="text-lg font-semibold text-gray-800 mb-4">
					Gastos por Categoría
				</h3>
				<div class="h-64">
					<canvas id="expensesChart"></canvas>
				</div>
			</div>

			<!-- Gráfico de Tendencias -->
			<div
				class="bg-white p-6 rounded-xl shadow-sm border border-gray-100"
			>
				<h3 class="text-lg font-semibold text-gray-800 mb-4">
					Tendencias de Gastos
				</h3>
				<div class="h-64">
					<canvas id="trendsChart"></canvas>
				</div>
			</div>
		</div>

		<!-- Últimas Transacciones -->
		<div class="bg-white rounded-xl shadow-sm border border-gray-100">
			<div class="p-6 border-b border-gray-100">
				<h3 class="text-lg font-semibold text-gray-800">
					Últimas Transacciones
				</h3>
			</div>
			<div class="p-6">
				<div class="space-y-4">
					{
						[1, 2, 3, 4, 5].map(() => (
							<div class="flex items-center justify-between py-3">
								<div class="flex items-center gap-4">
									<div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center">
										<svg
											class="w-5 h-5 text-gray-500"
											fill="none"
											stroke="currentColor"
											viewBox="0 0 24 24"
										>
											<path
												stroke-linecap="round"
												stroke-linejoin="round"
												stroke-width="2"
												d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
											/>
										</svg>
									</div>
									<div>
										<p class="font-medium text-gray-800">
											Compra en Supermercado
										</p>
										<p class="text-sm text-gray-500">
											23 Mar, 2024
										</p>
									</div>
								</div>
								<span class="text-red-600 font-medium">
									-$85.00
								</span>
							</div>
						))
					}
				</div>
				<div class="mt-6">
					<a
						href="/transactions"
						class="text-purple-600 hover:text-purple-700 font-medium text-sm"
					>
						Ver todas las transacciones →
					</a>
				</div>
			</div>
		</div>
	</div>
</Layout>

<script>
	import Chart from "chart.js/auto";

	// Datos para el gráfico circular
	const expensesData = {
		labels: [
			"Comida",
			"Transporte",
			"Entretenimiento",
			"Servicios",
			"Otros",
		],
		datasets: [
			{
				data: [300, 150, 200, 250, 100],
				backgroundColor: [
					"#818CF8", // Indigo
					"#34D399", // Emerald
					"#F472B6", // Pink
					"#FBBF24", // Amber
					"#9CA3AF", // Gray
				],
				borderWidth: 1,
			},
		],
	};

	// Datos para el gráfico de líneas
	const trendsData = {
		labels: ["Ene", "Feb", "Mar", "Abr", "May", "Jun"],
		datasets: [
			{
				label: "Gastos",
				data: [1500, 1800, 1600, 2000, 1700, 1900],
				borderColor: "#818CF8",
				tension: 0.4,
				fill: true,
				backgroundColor: "rgba(129, 140, 248, 0.1)",
			},
		],
	};

	// Configuración común
	const commonOptions = {
		responsive: true,
		maintainAspectRatio: false,
	};

	// Crear gráfico circular
	new Chart(document.getElementById("expensesChart"), {
		type: "doughnut",
		data: expensesData,
		options: {
			...commonOptions,
			plugins: {
				legend: {
					position: "bottom",
				},
			},
		},
	});

	// Crear gráfico de líneas
	new Chart(document.getElementById("trendsChart"), {
		type: "line",
		data: trendsData,
		options: {
			...commonOptions,
			plugins: {
				legend: {
					display: false,
				},
			},
			scales: {
				y: {
					beginAtZero: true,
					grid: {
						display: true,
						drawBorder: false,
					},
					ticks: {
						callback: (value) => `$${value}`,
					},
				},
				x: {
					grid: {
						display: false,
					},
				},
			},
		},
	});
</script>
